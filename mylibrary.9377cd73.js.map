{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-0ab2af24b797fae4.js","src/js/my-library.js","node_modules/@parcel/runtime-js/lib/runtime-e5764efe6e431a5d.js","src/js/firebase-ml.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2bI8P\\\":\\\"mylibrary.9377cd73.js\\\",\\\"jxU4Y\\\":\\\"thereNothingHere.d5e2b699.jpg\\\",\\\"5UbS1\\\":\\\"index.253d2dff.css\\\",\\\"5ZwWc\\\":\\\"index.f5f8241a.js\\\"}\"));","import { createMovieCards } from './moviesMarkup';\n// import { onMovieCardClick } from './moviesGallery';\nimport { modalBasicLightbox } from './modalBasicLightbox';\nimport { localStorageAPI } from './localStorageAPI';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport nothingHereIMG from '../img/thereNothingHere.jpg';\nimport { initializeApp } from 'firebase/app';\nimport { getDatabase, set, ref, update, get, onValue, child, remove } from 'firebase/database';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n  getAdditionalUserInfo,\n} from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCI5JTbKtHIHNuS4WcbgMfz2S8WxJp_ehM',\n  authDomain: 'filmoteka-proj-7.firebaseapp.com',\n  databaseURL: 'https://filmoteka-proj-7-default-rtdb.europe-west1.firebasedatabase.app/',\n  projectId: 'filmoteka-proj-7',\n  storageBucket: 'filmoteka-proj-7.appspot.com',\n  messagingSenderId: '181528100082',\n  appId: '1:181528100082:web:031dd9add36023a4e5e46b',\n  measurementId: 'G-1X27T2N03L',\n};\n// Заглушка, когда пусто в MyLibrary\nconst DefaultMarcup = `<li class=\"default-img\"><img src=\"${nothingHereIMG}\" \n  alt=\"nothing-here\" width=\"400px\"></img></li>`;\n\nconst app = initializeApp(firebaseConfig);\nconst database = getDatabase(app);\nconst dbRef = ref(getDatabase());\nconst auth = getAuth();\nlet userId;\nlet userEmail;\nlet getWatched = [];\nlet getQueue = [];\nlet markup = '';\nconst logoutMlBtnEl = document.querySelector('.logout');\nconst welcomeMl = document.querySelector('.welcome-ml');\n\nonAuthStateChanged(auth, user => {\n  if (user) {\n    userId = user.uid;\n    userEmail = user.email;\n    console.log('Это обсервер my-library');\n    logoutMlBtnEl.classList.remove('visually-hidden');\n    welcomeMl.innerHTML = `Welcome, ${userEmail}!`;\n  } else {\n    logoutMlBtnEl.classList.add('visually-hidden');\n  }\n});\n\nconst moviesContainer = document.querySelector('.movies');\nconst watchedBtnEl = document.querySelector('[data-id=\"watched-btn\"');\nconst queueBtnEl = document.querySelector('[data-id=\"queue-btn\"');\nconst myLibraryNavEl = document.querySelector('.header-nav__link--current-header');\nconst localStorageApi = new localStorageAPI();\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n// myLibraryNavEl.addEventListener('click', renderCardsWatched);\n\nfunction renderCardsWatched() {\n  let getWatched = [];\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      userId = user.uid;\n      userEmail = user.email;\n      get(child(dbRef, `users/${userId}watched/watched`))\n        .then(snapshot => {\n          if (snapshot.exists()) {\n            getWatched = snapshot.val();\n            localStorage.setItem('watched', JSON.stringify(getWatched));\n            console.log('getWatched', snapshot.val());\n            markup = createMovieCards(getWatched);\n            moviesContainer.innerHTML = markup;\n            moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n          } else {\n            console.log('No data available');\n            getWatched = snapshot.val();\n            console.log('getWatched', snapshot.val());\n            markup = DefaultMarcup;\n            moviesContainer.innerHTML = markup;\n            moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n          }\n        })\n        .catch(error => {\n          console.error(error);\n        });\n      get(child(dbRef, `users/${userId}queue/queue`))\n        .then(snapshot => {\n          if (snapshot.exists()) {\n            getQueue = snapshot.val();\n            localStorage.setItem('queue', JSON.stringify(getQueue));\n            console.log('getQueue', snapshot.val());\n            markup = createMovieCards(getQueue);\n          } else {\n            console.log('No data available');\n            getWatched = snapshot.val();\n          }\n        })\n        .catch(error => {\n          console.error(error);\n        });\n    } else {\n      getWatched = localStorageApi.getData('watched');\n      if (getWatched === null || getWatched.length === 0) {\n        markup = DefaultMarcup;\n      } else {\n        markup = createMovieCards(getWatched);\n      }\n      moviesContainer.innerHTML = markup;\n      moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n    }\n  });\n}\n\nrenderCardsWatched();\n\nfunction onWatchedBtnClick() {\n  moviesContainer.removeEventListener('click', onQueueMovieCardClick);\n\n  if (watchedBtnEl.classList.contains('is-active')) {\n    return;\n  }\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      userId = user.uid;\n      userEmail = user.email;\n      get(child(dbRef, `users/${userId}watched/watched`))\n        .then(snapshot => {\n          if (snapshot.exists()) {\n            getWatched = snapshot.val();\n            console.log('getWatched', snapshot.val());\n            markup = createMovieCards(getWatched);\n            moviesContainer.innerHTML = markup;\n            moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n          } else {\n            console.log('No data available');\n            getWatched = snapshot.val();\n            console.log('getWatched', snapshot.val());\n            markup = DefaultMarcup;\n            moviesContainer.innerHTML = markup;\n            moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n          }\n        })\n        .catch(error => {\n          console.error(error);\n        });\n    } else {\n      getWatched = localStorageApi.getData('watched');\n      if (getWatched === null || getWatched.length === 0) {\n        markup = DefaultMarcup;\n      } else {\n        markup = createMovieCards(getWatched);\n      }\n      moviesContainer.innerHTML = markup;\n      moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n    }\n  });\n}\n\nfunction onQueueBtnClick() {\n  moviesContainer.removeEventListener('click', onWatchedMovieCardClick);\n\n  if (!watchedBtnEl.classList.contains('is-active')) {\n    return;\n  }\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      userId = user.uid;\n      userEmail = user.email;\n      get(child(dbRef, `users/${userId}queue/queue`))\n        .then(snapshot => {\n          if (snapshot.exists()) {\n            getQueue = snapshot.val();\n            console.log('getQueue', snapshot.val());\n            markup = createMovieCards(getQueue);\n            moviesContainer.innerHTML = markup;\n            moviesContainer.addEventListener('click', onQueueMovieCardClick);\n          } else {\n            console.log('No data available');\n            getWatched = snapshot.val();\n            console.log('getWatched', snapshot.val());\n            markup = DefaultMarcup;\n            moviesContainer.innerHTML = markup;\n            moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n          }\n        })\n        .catch(error => {\n          console.error(error);\n        });\n    } else {\n      const getQueue = localStorageApi.getData('queue');\n      if (getQueue === null || getQueue.length === 0) {\n        markup = DefaultMarcup;\n      } else {\n        markup = createMovieCards(getQueue);\n      }\n      moviesContainer.innerHTML = markup;\n      moviesContainer.addEventListener('click', onQueueMovieCardClick);\n    }\n  });\n}\n\nfunction onWatchedMovieCardClick(e) {\n  const targetFilm = e.target.closest('li').dataset.id;\n  if (e.target.nodeName === 'UL') {\n    return;\n  }\n\n  try {\n    const movies = localStorageApi.getData('watched');\n    const parsedGenres = localStorageApi.getData('genresList');\n    const film = movies.filter(({ id }) => id === Number(targetFilm))[0];\n    const { genre_ids } = film;\n    let genres;\n    if (genre_ids) {\n      genres = parsedGenres.filter(({ id }) => genre_ids.includes(id)).map(({ name }) => name);\n    }\n    film.genres = genres;\n\n    localStorageApi.setData('current-film', film);\n\n    modalBasicLightbox(film, 'watched');\n    localStorageApi.addListenersToBtns();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction onQueueMovieCardClick(e) {\n  const targetFilm = e.target.closest('li').dataset.id;\n  if (e.target.nodeName === 'UL') {\n    return;\n  }\n\n  try {\n    const movies = localStorageApi.getData('queue');\n    const parsedGenres = localStorageApi.getData('genresList');\n    const film = movies.filter(({ id }) => id === Number(targetFilm))[0];\n    const { genre_ids } = film;\n    let genres;\n    if (genre_ids) {\n      genres = parsedGenres.filter(({ id }) => genre_ids.includes(id)).map(({ name }) => name);\n    }\n    film.genres = genres;\n\n    localStorageApi.setData('current-film', film);\n\n    modalBasicLightbox(film, 'queue');\n    localStorageApi.addListenersToBtns();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('2bI8P') + require('./helpers/bundle-manifest').resolve(\"jxU4Y\");","import { initializeApp } from 'firebase/app';\nimport { getDatabase, set, ref, update, get, onValue, child, remove } from 'firebase/database';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n  getAdditionalUserInfo,\n} from 'firebase/auth';\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCI5JTbKtHIHNuS4WcbgMfz2S8WxJp_ehM',\n  authDomain: 'filmoteka-proj-7.firebaseapp.com',\n  databaseURL: 'https://filmoteka-proj-7-default-rtdb.europe-west1.firebasedatabase.app/',\n  projectId: 'filmoteka-proj-7',\n  storageBucket: 'filmoteka-proj-7.appspot.com',\n  messagingSenderId: '181528100082',\n  appId: '1:181528100082:web:031dd9add36023a4e5e46b',\n  measurementId: 'G-1X27T2N03L',\n};\nimport {\n  registrationForm,\n  registrationFormName,\n  registrationFormEmail,\n  registrationFormPassword,\n  registrationFormSubmit,\n  loginForm,\n  loginFormName,\n  loginFormEmail,\n  loginFormPassword,\n  onCloseModal,\n  closeOnSubmit,\n} from '/src/js/modals/modal-auth.js';\n\nconst app = initializeApp(firebaseConfig);\nconst database = getDatabase(app);\nconst auth = getAuth();\n\nconst logoutMlBtnEl = document.querySelector('.logout');\nconst welcomeMl = document.querySelector('.welcome-ml');\n\nlet userId;\nlet userEmail;\nlet email;\nlet password;\n\nconsole.log('firebase-ml is running');\n// обсервер текущего пользователя\nconst welcome = document.querySelector('.welcome-ml');\nconst login = document.querySelector('.login');\n\nonAuthStateChanged(auth, user => {\n  if (user) {\n    userId = user.uid;\n    userEmail = user.email;\n    console.log('current user = ', userEmail);\n    logoutMlBtnEl.classList.remove('visually-hidden');\n    login.classList.add('visually-hidden');\n    welcomeMl.innerHTML = `Welcome, ${userEmail}!`;\n  } else {\n    login.classList.remove('visually-hidden');\n  }\n});\n\n//регистрация новых пользователей\nregistrationFormSubmit.addEventListener('click', onRegistrationSubmit);\n\nfunction onRegistrationSubmit(event) {\n  event.preventDefault();\n  // const name = registrationFormName.value;\n  const email = registrationFormEmail.value;\n  console.log(email);\n  const password = registrationFormPassword.value;\n  console.log(password);\n  createUserWithEmailAndPassword(auth, email, password)\n    .then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n      // set(ref(database, 'users/' + user.uid), {\n      //   email: email,\n      //   displayName: email,\n      // });\n      // ...\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      console.log(errorCode);\n      console.log(errorMessage);\n      // ..\n    });\n  registrationForm.reset();\n  closeOnSubmit();\n}\n\n//авторизация существующих хользователей\nloginForm.addEventListener('submit', onLoginSubmit);\n\nfunction onLoginSubmit(event) {\n  event.preventDefault();\n  localStorage.removeItem('watched');\n  localStorage.removeItem('queue');\n  const email = loginFormEmail.value;\n  const password = loginFormPassword.value;\n\n  signInWithEmailAndPassword(auth, email, password)\n    .then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n      window.location.reload();\n      // ...\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n    });\n\n  loginForm.reset();\n  closeOnSubmit();\n}\n\n//логаут\n\nlogoutMlBtnEl.addEventListener('click', logOutMl);\n\nfunction logOutMl() {\n  signOut(auth)\n    .then(() => {\n      userEmail = null;\n      window.location.reload();\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$aTzrc","$2fb9e528ce7e7e2f$exports","getBundleURL","resolve","$bb2af86579234925$var$userId","$bb2af86579234925$var$userEmail","$bb2af86579234925$var$DefaultMarcup","concat","$parcel$interopDefault","$bb2af86579234925$var$app","$6Urw1","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","$bb2af86579234925$var$dbRef","$6Nu6u","getDatabase","ref","$bb2af86579234925$var$auth","$3SEMc","getAuth","$bb2af86579234925$var$getWatched","$bb2af86579234925$var$getQueue","$bb2af86579234925$var$markup","$bb2af86579234925$var$logoutMlBtnEl","document","querySelector","$bb2af86579234925$var$welcomeMl","onAuthStateChanged","user","uid","email","console","log","classList","remove","innerHTML","add","getWatched1","$bb2af86579234925$var$moviesContainer","$bb2af86579234925$var$watchedBtnEl","$bb2af86579234925$var$queueBtnEl","$bb2af86579234925$var$localStorageApi","$6fJbC","localStorageAPI","$bb2af86579234925$var$onWatchedMovieCardClick","e","targetFilm","target","closest","dataset","nodeName","genres","movies","getData","parsedGenres","film","filter","param","Number","genre_ids","includes","map","name","setData","$g2YN6","modalBasicLightbox","addListenersToBtns","error","message","$bb2af86579234925$var$onQueueMovieCardClick","addEventListener","removeEventListener","contains","get","child","then","snapshot","exists","val","createMovieCards","catch","getQueue1","localStorage","setItem","stringify","$cece4c1cb9f0c61b$var$userEmail","$cece4c1cb9f0c61b$var$app","$cece4c1cb9f0c61b$var$auth","$cece4c1cb9f0c61b$var$logoutMlBtnEl","$cece4c1cb9f0c61b$var$welcomeMl","$cece4c1cb9f0c61b$var$login","$8uW00","registrationFormSubmit","event","preventDefault","email1","registrationFormEmail","password1","registrationFormPassword","createUserWithEmailAndPassword","userCredential","errorCode","code","errorMessage","registrationForm","reset","closeOnSubmit","loginForm","removeItem","email2","loginFormEmail","password2","loginFormPassword","signInWithEmailAndPassword","window","location","reload","signOut"],"version":3,"file":"mylibrary.9377cd73.js.map"}